<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>My Favorites</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
<!-- Navbar -->
<div th:replace="~{fragments/_navbar :: navbar}"></div>

<main class="container py-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
    <h2 class="mb-0">‚ù§Ô∏è My Favorite Products</h2>
    <a th:href="@{/products}" class="btn btn-outline-secondary btn-sm d-inline-flex align-items-center gap-1">‚Üê <span>Back&nbsp;to&nbsp;Products</span></a>
</div>

    <!--  Success message after removing -->
    <div th:if="${successMessage}" class="alert alert-success text-center" role="alert"
         th:text="${successMessage}"></div>

    <div th:if="${favorites.size() == 0}">
        <p>You haven't added any favorite products yet.</p>
    </div>

    <div class="row row-cols-1 row-cols-sm-2 row-cols-md-3 g-4" th:if="${favorites.size() > 0}">
        <div class="col" th:each="fav : ${favorites}">
            <div class="card h-100 shadow-sm">
                <img class="card-img-top object-fit-cover" style="height: 180px"
                     th:src="${fav.product.imageUrl == null ? '/images/placeholder.png' : (fav.product.imageUrl.startsWith('http') ? fav.product.imageUrl : '/' + fav.product.imageUrl)}"
                     th:alt="${fav.product.name}">
                <div class="card-body d-flex flex-column">
                    <h5 class="card-title fw-semibold" th:text="${fav.product.name}">Product name</h5>
                    <p class="card-text text-secondary small" th:text="${fav.product.description}">Description</p>
                    <div class="mt-auto fs-5 fw-bold text-primary"
                         th:text="${fav.product.price != null ? #numbers.formatDecimal(fav.product.price, 0, 'COMMA', 2, 'POINT') + ' ‚Ç™' : '‚Äì'}">0.00 ‚Ç™</div>

                    <a th:href="@{/favorites/remove/{id}(id=${fav.product.id})}"
                       class="btn btn-outline-danger btn-sm mt-2">
                        üíî Remove
                    </a>
                </div>
            </div>
        </div>
    </div>
</main>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.7/dist/js/bootstrap.bundle.min.js"></script>

    <div style="margin: 20px;">
</div>
    
</body>
</html>
